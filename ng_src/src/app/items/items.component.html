<header id="data-header">
  <img class="header-img" src="assets/itemsHeader.png" />
  <div class="header-search">
      <img class="search-icon" src="assets/searchIcon.png" />
      <input (keyup)="searchFilter($event)" class="search" placeholder="Search..." />
  </div>
  <div class="header-tools">
    <div>
      <button (click)=onAddClick()>Add New Item</button>
      <button [ngClass]="editMode ? 'toggled-on' : ''" (click)=toggleEditMode($event)>Edit Mode Off</button>  
    </div>
    <div>
      <button (click)="onSelectClick($event)">
        <span *ngIf="itemsSelected.length == 0, else deselectTxt">Select All</span>
        <ng-template #deselectTxt >Deselect All</ng-template>
      </button>
      <button (click)="onDeleteClick()"> Delete Selected</button>
    </div>
  </div>
  <div class="header-cats">
    <div class="category" (click)="onCatClick($event, 'mat')">
      <img [ngClass]="allowMat ? '' : 'top'" src="assets/cats/mat-off.png" />
      <img [ngClass]="!allowMat ? '' : 'top'" src="assets/cats/mat-on.png" />
    </div>
    <div class="category" (click)="onCatClick($event, 'ammo')">
      <img [ngClass]="allowAmmo ? '' : 'top'" src="assets/cats/ammo-off.png" />
      <img [ngClass]="!allowAmmo ? '' : 'top'" src="assets/cats/ammo-on.png" />
    </div>
    <div class="category" (click)="onCatClick($event, 'deco')">
      <img [ngClass]="allowDeco ? '' : 'top'" src="assets/cats/deco-off.png" />
      <img [ngClass]="!allowDeco ? '' : 'top'" src="assets/cats/deco-on.png" />
    </div>
    <div class="category" (click)="onCatClick($event, 'misc')">
      <img [ngClass]="allowMisc ? '' : 'top'" src="assets/cats/misc-off.png" />
      <img [ngClass]="!allowMisc ? '' : 'top'" src="assets/cats/misc-on.png" />
    </div>
    <div class="category" (click)="onCatClick($event, 'tool')">
      <img [ngClass]="allowTool ? '' : 'top'" src="assets/cats/tool-off.png" />
      <img [ngClass]="!allowTool ? '' : 'top'" src="assets/cats/tool-on.png" />
    </div>
  </div>
</header>

<div id="data-container">

  <ng-container *ngFor="let category of categories">
    <section *ngIf="itemsPerCategory(category) let catItems" class="data-category">
      <header>
        <h3>{{category}}</h3>
      </header>
      <ul>
        <li *ngFor="let item of catItems" >
          <div (click)="onItemClick($event, item)" 
            [ngClass]="itemsSelected.includes(item) ? entryClassName + ' selected' : entryClassName">
            <div class="list-item-icon">
              <img src="assets/items/OreIcon.png" alt="Iron Ore"/>
            </div>
            <div class="list-item-name">{{item.name}}</div>
            <div [ngClass]="'rare' + item.rarity">R{{item.rarity}}</div>
            <div class="list-item-desc">{{item.desc}}</div>
            <div class="list-item-obtained">
              Obtained <span> {{item.obtainedFrom}} </span>
            </div>            
            <div>
              Buy <span>{{item.buyPrice}} z </span>
            </div>
            <div>
              Sell <span>{{item.sellPrice}} z </span>
            </div>
            <div>
              Carry <span>{{item.carry}}</span>
            </div>
          </div>
          <div *ngIf="false" class="list-item-extra">
            <div>
              Skill - {{item.skillID}}
            </div>
          </div>
        </li>
      </ul>
    </section>
  </ng-container>

</div>
