<header id="data-header">
  <img class="header-img" src="assets/itemsHeader.png" />
  <div class="header-search">
      <img class="search-icon" src="assets/searchIcon.png" />
      <input (keyup)="searchFilter()" [(ngModel)]="searchStr" class="search" placeholder="Search..." />
  </div>
  <div class="header-tools">
    
    <div class="header-btn">
      <button class="btn-round btn-sml btn-light" (click)=addNewItem()>
        <i class="material-icons header-btn-icon">add</i>
      </button>
      <div class="header-btn-tooltip">
        <div class="header-btn-vr"></div>
        <span>Add New Item</span>
      </div> 
    </div>

    <div class="header-btn">
        <button class="btn-round btn-sml btn-light"
          [ngClass]="{'toggled-on' : editMode}"
          (click)=toggleEditMode($event)>
          <i class="material-icons header-btn-icon">edit</i>
        </button>  
      <div class="header-btn-tooltip">
        <div class="header-btn-vr"></div>
        <span>Toggle Edit Mode</span>
      </div> 
    </div>

    <div class="header-btn">
      <button class="btn-round btn-sml btn-light" (click)="selectAll($event)">
        <i class="material-icons header-btn-icon"
         *ngIf="itemsSelected.length == 0, else deselectTxt">reorder</i>
      </button>
      <div class="header-btn-tooltip">
        <div class="header-btn-vr"></div>
        <span> Select All </span>
      </div> 
    </div>
    
    <div class="header-btn">
      <button class="btn-round btn-sml btn-light" (click)=deleteSelected()>
        <i class="material-icons header-btn-icon">delete</i>
      </button>
      <div class="header-btn-tooltip">
        <div class="header-btn-vr"></div>
        <span> Delete Selected</span>
      </div> 
    </div>
  
     
    <!-- 
    <button (click)="selectAll($event)">
      <span *ngIf="itemsSelected.length == 0, else deselectTxt">Select All</span>
      <ng-template #deselectTxt >Deselect All</ng-template>
    </button>
     -->
    
  </div>
  <div class="header-cats">
    <div class="category" (click)="toggleCat($event, 'Material')">
      <img class="top" src="assets/cats/mat-off.png" />
      <img [ngClass]="{'top' : categoryToggle['Material']}" src="assets/cats/mat-on.png" />
    </div>
    <div class="category" (click)="toggleCat($event, 'Ammo/Coating')">
      <img class="top" src="assets/cats/ammo-off.png" />
      <img [ngClass]="{'top' : categoryToggle['Ammo/Coating']}" src="assets/cats/ammo-on.png" />
    </div>
    <div class="category" (click)="toggleCat($event, 'Decoration')">
      <img class="top" src="assets/cats/deco-off.png" />
      <img [ngClass]="{'top' : categoryToggle['Decoration']}" src="assets/cats/deco-on.png" />
    </div>
    <div class="category" (click)="toggleCat($event, 'Consumable/Misc')">
      <img class="top" src="assets/cats/misc-off.png" />
      <img [ngClass]="{'top' : categoryToggle['Consumable/Misc']}" src="assets/cats/misc-on.png" />
    </div>
    <div class="category" (click)="toggleCat($event, 'Specialized Tool')">
      <img class="top" src="assets/cats/tool-off.png" />
      <img [ngClass]="{'top' : categoryToggle['Specialized Tool']}" src="assets/cats/tool-on.png" />
    </div>
  </div>
</header>

<div id="data-container">

  <ng-container *ngFor="let category of objectKeys(itemsFiltered)"> 
    <section *ngIf="itemsFiltered[category].length > 0 && categoryToggle[category]" class="data-category">
      <header>
        <h3>{{category}}</h3>
      </header>
      <ul>
        <li *ngFor="let item of itemsFiltered[category]">
          <div (click)="onItemClick($event, item)" class="list-item" 
            [ngClass]="{'selected' : itemsSelected.includes(item)}">
            <div class="list-item-icon">
              <img src={{item.iconUrl}} alt={{item.name}}/>
            </div>
            <div class="list-item-name">
              {{item.name}}
            </div>
            <div [ngClass]="'rare' + item.rarity">
              R{{item.rarity}}
            </div>
            <div class="list-item-desc">
              {{item.desc}}
            </div>
            <div class="list-item-obtained">
              Obtained <span> {{item.obtainedFrom}} </span>
            </div>            
            <div>
              Buy <span>{{item.buyPrice}} z </span>
            </div>
            <div>
              Sell <span>{{item.sellPrice}} z </span>
            </div>
            <div>
              Carry <span>{{item.carry}}</span>
            </div>
          </div>
          <div *ngIf="item.skill" class="list-item-extra">
            <div class="list-item-skill">
              <img src="{{item.skill.iconPath}}" />
              <span>{{item.skill.name}}</span>
              <span class="skill-desc">{{item.skill.desc}}</span>
            </div>
          </div>
        </li>
      </ul>
    </section>
  </ng-container>

</div>
